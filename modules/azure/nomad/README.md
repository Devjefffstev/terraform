<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >=4.0 |

## Providers

No providers.

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_avm_res_network_networksecuritygroup"></a> [avm\_res\_network\_networksecuritygroup](#module\_avm\_res\_network\_networksecuritygroup) | Azure/avm-res-network-networksecuritygroup/azurerm | 0.5.0 |
| <a name="module_vmss"></a> [vmss](#module\_vmss) | Azure/avm-res-compute-virtualmachinescaleset/azurerm | 0.8.0 |

## Resources

No resources.

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_additional_capabilities"></a> [additional\_capabilities](#input\_additional\_capabilities) | n/a | <pre>object({<br/>    ultra_ssd_enabled = optional(bool)<br/>  })</pre> | `null` | no |
| <a name="input_admin_password"></a> [admin\_password](#input\_admin\_password) | (Optional) The admin password for the Virtual Machine Scale Set. Changing this forces a new resource to be created. | `string` | `null` | no |
| <a name="input_admin_ssh_keys"></a> [admin\_ssh\_keys](#input\_admin\_ssh\_keys) | (Optional) One or more SSH public keys associated with the user accounts of the Virtual Machine Scale Set. | <pre>set(object({<br/>    username   = string<br/>    public_key = string<br/>    id         = string<br/>  }))</pre> | `null` | no |
| <a name="input_app_function_chatam"></a> [app\_function\_chatam](#input\_app\_function\_chatam) | (Optional) Denotes the application name, microservice, or infrastructure purpose. Where multiple words are needed to describe an app/function, they should be separated with hyphens.<br/>Examples: core (Core services), api (API service), debt-db (Database), web (Web front-end)<br/>Why: Differentiates resources based on business logic or function. | `string` | `"core-compute"` | no |
| <a name="input_automatic_instance_repair"></a> [automatic\_instance\_repair](#input\_automatic\_instance\_repair) | (Optional) The automatic instance repair policy of the Virtual Machine Scale Set. | <pre>object({<br/>    enabled      = bool<br/>    grace_period = string<br/>  })</pre> | <pre>{<br/>  "enabled": true,<br/>  "grace_period": "PT30M"<br/>}</pre> | no |
| <a name="input_boot_diagnostics"></a> [boot\_diagnostics](#input\_boot\_diagnostics) | (Optional) The boot diagnostics of the Virtual Machine Scale Set. | <pre>object({<br/>    storage_account_uri = optional(string)<br/>  })</pre> | `null` | no |
| <a name="input_capacity_reservation_group_id"></a> [capacity\_reservation\_group\_id](#input\_capacity\_reservation\_group\_id) | (Optional) The ID of the Capacity Reservation Group to associate with the Virtual Machine Scale Set. | `string` | `null` | no |
| <a name="input_data_disk"></a> [data\_disk](#input\_data\_disk) | n/a | <pre>set(object({<br/>    caching                        = string<br/>    create_option                  = optional(string)<br/>    disk_encryption_set_id         = optional(string)<br/>    disk_size_gb                   = optional(number)<br/>    lun                            = optional(number)<br/>    storage_account_type           = string<br/>    ultra_ssd_disk_iops_read_write = optional(number)<br/>    ultra_ssd_disk_mbps_read_write = optional(number)<br/>    write_accelerator_enabled      = optional(bool)<br/>  }))</pre> | `null` | no |
| <a name="input_enable_telemetry"></a> [enable\_telemetry](#input\_enable\_telemetry) | (Optional) Should the Virtual Machine Scale Set send telemetry data to Microsoft? | `bool` | `false` | no |
| <a name="input_encryption_at_host_enabled"></a> [encryption\_at\_host\_enabled](#input\_encryption\_at\_host\_enabled) | (Optional) Should the Virtual Machine Scale Set have Encryption at Host enabled? | `bool` | `false` | no |
| <a name="input_environment"></a> [environment](#input\_environment) | (Optional) Identifies the deployment stage/environment of the resource. <br/>Standard Abbreviations: sbx, dev, int, prod. Why: Supports lifecycle separation and avoids cross-env conflicts. | `string` | `"dev"` | no |
| <a name="input_eviction_policy"></a> [eviction\_policy](#input\_eviction\_policy) | (Optional) The eviction policy for the Virtual Machine Scale Set. Possible values are: 'Deallocate' and 'Delete'. | `string` | `null` | no |
| <a name="input_extension"></a> [extension](#input\_extension) | (Optional) One or more extensions to add to the Virtual Machine Scale Set. | <pre>set(object({<br/>    auto_upgrade_minor_version_enabled        = optional(bool)<br/>    extensions_to_provision_after_vm_creation = optional(set(string))<br/>    failure_suppression_enabled               = optional(bool)<br/>    force_extension_execution_on_change       = optional(string)<br/>    name                                      = string<br/>    publisher                                 = string<br/>    settings                                  = optional(string)<br/>    type                                      = string<br/>    type_handler_version                      = string<br/>    protected_settings_from_key_vault = optional(object({<br/>      secret_url      = string<br/>      source_vault_id = string<br/>    }), null)<br/>  }))</pre> | `null` | no |
| <a name="input_extension_operations_enabled"></a> [extension\_operations\_enabled](#input\_extension\_operations\_enabled) | (Optional) Should extension operations be enabled for the Virtual Machine Scale Set? | `bool` | `true` | no |
| <a name="input_extension_protected_setting"></a> [extension\_protected\_setting](#input\_extension\_protected\_setting) | (Optional) A JSON String which specifies Sensitive Settings (such as Passwords) for the Extension. | `map(string)` | `{}` | no |
| <a name="input_extensions_time_budget"></a> [extensions\_time\_budget](#input\_extensions\_time\_budget) | (Optional) The time budget for all extensions to be provisioned on the Virtual Machine Scale Set. | `string` | `null` | no |
| <a name="input_image_galleries"></a> [image\_galleries](#input\_image\_galleries) | Properties for VMSS Image Gallery | <pre>map(object({<br/>    location            = optional(string)<br/>    resource_group_name = optional(string)<br/>    shared_image_definitions = list(object({<br/>      name = string<br/>      # Define the source and version from your image. Use Packer to create a custom image and push it to a Shared Image Gallery.<br/>      image_version = list(object({<br/>        create_vmss_with_this_image = optional(bool, false)<br/>        image_name                  = string<br/>        managed_image_id            = optional(string)<br/>        target_region = object({<br/>          name                   = string<br/>          regional_replica_count = string<br/>          storage_account_type   = string<br/>        })<br/>      }))<br/>      identifier = object({<br/>        publisher = string<br/>        offer     = string<br/>      sku = string })<br/>      os_type = string<br/>      purchase_plan = optional(object({<br/>        name      = string<br/>        publisher = optional(string)<br/>      product = optional(string) }))<br/>      description                         = optional(string)<br/>      disk_types_not_allowed              = optional(list(string))<br/>      end_of_life_date                    = optional(string)<br/>      eula                                = optional(string)<br/>      specialized                         = optional(bool)<br/>      architecture                        = optional(string, "x64")<br/>      hyper_v_generation                  = optional(string, "V1")<br/>      max_recommended_vcpu_count          = optional(number)<br/>      min_recommended_vcpu_count          = optional(number)<br/>      max_recommended_memory_in_gb        = optional(number)<br/>      min_recommended_memory_in_gb        = optional(number)<br/>      privacy_statement_uri               = optional(string)<br/>      release_note_uri                    = optional(string)<br/>      trusted_launch_enabled              = optional(bool)<br/>      confidential_vm_supported           = optional(bool)<br/>      confidential_vm_enabled             = optional(bool)<br/>      accelerated_network_support_enabled = optional(bool)<br/>      tags                                = optional(map(string))<br/>  })) }))</pre> | `null` | no |
| <a name="input_instances"></a> [instances](#input\_instances) | (Optional) The number of instances which should exist within the Virtual Machine Scale Set. | `number` | `2` | no |
| <a name="input_license_type"></a> [license\_type](#input\_license\_type) | (Optional) Specifies that the image used was licensed on-premises. This element is only used for images that contain Windows Server. | `string` | `null` | no |
| <a name="input_location"></a> [location](#input\_location) | (Required) The Azure Region where the Virtual Machine Scale Set should exist. | `string` | `"East US"` | no |
| <a name="input_lock"></a> [lock](#input\_lock) | n/a | <pre>object({<br/>    kind = string<br/>    name = optional(string, null)<br/>  })</pre> | `null` | no |
| <a name="input_managed_identities"></a> [managed\_identities](#input\_managed\_identities) | n/a | <pre>object({<br/>    system_assigned            = optional(bool, false)<br/>    user_assigned_resource_ids = optional(set(string), [])<br/>  })</pre> | `{}` | no |
| <a name="input_max_bid_price"></a> [max\_bid\_price](#input\_max\_bid\_price) | (Optional) The maximum price you are willing to pay for a Spot VM in the Virtual Machine Scale Set. A value of -1 indicates that you are willing to pay the full price. | `number` | `-1` | no |
| <a name="input_network_interface"></a> [network\_interface](#input\_network\_interface) | (Optional) One or more network interfaces to associate with the Virtual Machine Scale Set. | <pre>set(object({<br/>    dns_servers                   = optional(set(string))<br/>    enable_accelerated_networking = optional(bool)<br/>    enable_ip_forwarding          = optional(bool)<br/>    name                          = string<br/>    network_security_group_id     = optional(string)<br/>    primary                       = optional(bool)<br/>    ip_configuration = set(object({<br/>      application_gateway_backend_address_pool_ids = optional(set(string))<br/>      application_security_group_ids               = optional(set(string))<br/>      load_balancer_backend_address_pool_ids       = optional(set(string))<br/>      name                                         = string<br/>      primary                                      = optional(bool)<br/>      subnet_id                                    = optional(string)<br/>      version                                      = optional(string)<br/>      public_ip_address = optional(set(object({<br/>        domain_name_label       = optional(string)<br/>        idle_timeout_in_minutes = optional(number)<br/>        name                    = string<br/>        public_ip_prefix_id     = optional(string)<br/>        sku_name                = optional(string)<br/>        version                 = optional(string)<br/>        ip_tag = optional(set(object({<br/>          tag  = string<br/>          type = string<br/>        })))<br/>      })))<br/>    }))<br/>  }))</pre> | `null` | no |
| <a name="input_nsg_rules"></a> [nsg\_rules](#input\_nsg\_rules) | (Optional) One or more security rules to be associated with the Network Security Group. | <pre>map(object({ access = string<br/>    description                                = optional(string)<br/>    destination_address_prefix                 = optional(string)<br/>    destination_address_prefixes               = optional(set(string))<br/>    destination_application_security_group_ids = optional(set(string))<br/>    destination_port_range                     = optional(string)<br/>    destination_port_ranges                    = optional(set(string))<br/>    direction                                  = string<br/>    priority                                   = number<br/>    protocol                                   = string<br/>    source_address_prefix                      = optional(string)<br/>    source_address_prefixes                    = optional(set(string))<br/>    source_application_security_group_ids      = optional(set(string))<br/>    source_port_range                          = optional(string)<br/>    source_port_ranges                         = optional(set(string))<br/>    timeouts = optional(object({ create = optional(string)<br/>      delete = optional(string)<br/>      read   = optional(string)<br/>  update = optional(string) })) }))</pre> | `{}` | no |
| <a name="input_os_disk"></a> [os\_disk](#input\_os\_disk) | (Optional) The OS Disk which should be used for the Virtual Machine Scale Set. | <pre>object({<br/>    caching                   = string<br/>    disk_encryption_set_id    = optional(string)<br/>    disk_size_gb              = optional(number)<br/>    storage_account_type      = string<br/>    write_accelerator_enabled = optional(bool)<br/>    diff_disk_settings = optional(object({<br/>      option    = string<br/>      placement = optional(string)<br/>    }))<br/>  })</pre> | <pre>{<br/>  "caching": "ReadWrite",<br/>  "storage_account_type": "Premium_LRS"<br/>}</pre> | no |
| <a name="input_os_profile"></a> [os\_profile](#input\_os\_profile) | (Optional) The OS Profile which should be used for the Virtual Machine Scale Set. | <pre>object({<br/>    custom_data = optional(string)<br/>    linux_configuration = optional(object({<br/>      admin_username                  = string<br/>      computer_name_prefix            = optional(string)<br/>      disable_password_authentication = optional(bool)<br/>      user_data_base64                = optional(string)<br/>      patch_assessment_mode           = optional(string)<br/>      patch_mode                      = optional(string, "AutomaticByPlatform")<br/>      provision_vm_agent              = optional(bool, true)<br/>      admin_ssh_key_id                = optional(set(string))<br/>      secret = optional(set(object({<br/>        key_vault_id = string<br/>        certificate = set(object({<br/>          url = string<br/>        }))<br/>      })))<br/>    }))<br/>    windows_configuration = optional(object({<br/>      admin_username           = string<br/>      computer_name_prefix     = optional(string)<br/>      enable_automatic_updates = optional(bool, false)<br/>      hotpatching_enabled      = optional(bool)<br/>      patch_assessment_mode    = optional(string)<br/>      patch_mode               = optional(string, "AutomaticByPlatform")<br/>      provision_vm_agent       = optional(bool, true)<br/>      timezone                 = optional(string)<br/>      secret = optional(set(object({<br/>        key_vault_id = string<br/>        certificate = set(object({<br/>          store = string<br/>          url   = string<br/>        }))<br/>      })))<br/>      winrm_listener = optional(set(object({<br/>        certificate_url = optional(string)<br/>        protocol        = string<br/>      })))<br/>    }))<br/>  })</pre> | `null` | no |
| <a name="input_plan"></a> [plan](#input\_plan) | (Optional) The plan which should be used for the Virtual Machine Scale Set. | <pre>object({<br/>    name      = string<br/>    publisher = string<br/>    product   = string<br/>  })</pre> | `null` | no |
| <a name="input_platform_fault_domain_count"></a> [platform\_fault\_domain\_count](#input\_platform\_fault\_domain\_count) | (Optional) The platform fault domain count for the Virtual Machine Scale Set. Must be between 1 and 3. | `number` | `1` | no |
| <a name="input_priority"></a> [priority](#input\_priority) | (Optional) The priority of the Virtual Machine Scale Set. Possible values are: 'Regular', 'Spot' and 'Low'. | `string` | `"Regular"` | no |
| <a name="input_priority_mix"></a> [priority\_mix](#input\_priority\_mix) | (Optional) The priority mix settings for the Virtual Machine Scale Set. Required if priority is set to 'Low'. | <pre>object({<br/>    regular_percentage = optional(number)<br/>    spot_percentage    = optional(number)<br/>  })</pre> | `null` | no |
| <a name="input_proximity_placement_group_id"></a> [proximity\_placement\_group\_id](#input\_proximity\_placement\_group\_id) | (Optional) The ID of the Proximity Placement Group to associate with the Virtual Machine Scale Set. | `string` | `null` | no |
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | (Required) The name of the Resource Group in which to create the Virtual Machine Scale Set. | `string` | n/a | yes |
| <a name="input_role_assignments"></a> [role\_assignments](#input\_role\_assignments) | n/a | <pre>map(object({<br/>    role_definition_id_or_name             = string<br/>    principal_id                           = string<br/>    description                            = optional(string, null)<br/>    skip_service_principal_aad_check       = optional(bool, false)<br/>    condition                              = optional(string, null)<br/>    condition_version                      = optional(string, null)<br/>    delegated_managed_identity_resource_id = optional(string, null)<br/>    principal_type                         = optional(string, null)<br/>  }))</pre> | `null` | no |
| <a name="input_single_placement_group"></a> [single\_placement\_group](#input\_single\_placement\_group) | (Optional) Should the Virtual Machine Scale Set be a single placement group? | `bool` | `null` | no |
| <a name="input_sku_name"></a> [sku\_name](#input\_sku\_name) | (Required) The SKU name which should be used for the Virtual Machine Scale Set. | `string` | `"Standard_B1s"` | no |
| <a name="input_source_image_id"></a> [source\_image\_id](#input\_source\_image\_id) | It can be either:<br/><br/>  - (Optional) The ID of an Image which each Virtual Machine in this Scale Set should be based on. Possible Image ID types include Image IDs, Shared Image IDs, Shared Image Version IDs, Community Gallery Image IDs, Community Gallery Image Version IDs, Shared Gallery Image IDs and Shared Gallery Image Version IDs..<br/>  - If it is not defined, it will create an Azure Image Gallery and take the version of the image from the Shared Image Gallery Created passing this var `create_vmss_with_this_image` true. You must provide the values for `image_galleries` variable. | `string` | `null` | no |
| <a name="input_source_image_reference"></a> [source\_image\_reference](#input\_source\_image\_reference) | (Optional) The Source Image Reference which should be used for the Virtual Machine Scale Set. Required if source\_image\_id is not provided. | <pre>object({<br/>    publisher = string<br/>    offer     = string<br/>    sku       = string<br/>    version   = string<br/>  })</pre> | `null` | no |
| <a name="input_subscription_id"></a> [subscription\_id](#input\_subscription\_id) | (Optional) The Subscription ID which should be used for the AzureRM Provider. | `string` | `""` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | (Optional) A mapping of tags which should be assigned to the Virtual Machine Scale Set. | `map(string)` | `{}` | no |
| <a name="input_termination_notification"></a> [termination\_notification](#input\_termination\_notification) | n/a | <pre>object({<br/>    enabled = bool<br/>    timeout = optional(string)<br/>  })</pre> | `null` | no |
| <a name="input_timeouts"></a> [timeouts](#input\_timeouts) | (Optional) Timeouts for create, read, update and delete operations. | <pre>object({<br/>    create = optional(string)<br/>    delete = optional(string)<br/>    read   = optional(string)<br/>    update = optional(string)<br/>  })</pre> | `null` | no |
| <a name="input_upgrade_policy"></a> [upgrade\_policy](#input\_upgrade\_policy) | n/a | <pre>object({<br/>    upgrade_mode = optional(string, "Manual")<br/>    rolling_upgrade_policy = optional(object({<br/>      cross_zone_upgrades_enabled             = optional(bool)<br/>      max_batch_instance_percent              = optional(number)<br/>      max_unhealthy_instance_percent          = optional(number)<br/>      max_unhealthy_upgraded_instance_percent = optional(number)<br/>      pause_time_between_batches              = optional(string)<br/>      prioritize_unhealthy_instances_enabled  = optional(bool)<br/>      maximum_surge_instances_enabled         = optional(bool)<br/>    }), {})<br/>  })</pre> | <pre>{<br/>  "upgrade_mode": "Manual"<br/>}</pre> | no |
| <a name="input_user_data_base64"></a> [user\_data\_base64](#input\_user\_data\_base64) | (Optional) The Base64-Encoded User Data which should be used for this Virtual Machine Scale Set. | `string` | `null` | no |
| <a name="input_vmss_name"></a> [vmss\_name](#input\_vmss\_name) | (Required) The name of the Virtual Machine Scale Set. | `string` | `"vmss-nomad"` | no |
| <a name="input_zone_balance"></a> [zone\_balance](#input\_zone\_balance) | (Optional) Should the Virtual Machine Scale Set have zone balance enabled? | `bool` | `false` | no |
| <a name="input_zones"></a> [zones](#input\_zones) | (Optional) A list of availability zones to be used for the Virtual Machine Scale Set. | `set(string)` | <pre>[<br/>  "1",<br/>  "2",<br/>  "3"<br/>]</pre> | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_network_security_group_prop"></a> [network\_security\_group\_prop](#output\_network\_security\_group\_prop) | # Outputs for Module Network Security Group name Description: The name of the Network Security Group resource resource Description: The Network Security Group resource resource\_id Description: The id of the Network Security Group resource |
| <a name="output_vmss_prop"></a> [vmss\_prop](#output\_vmss\_prop) | # Outputs for Moduel Virtual Machine Scale Set resource Description: All attributes of the Virtual Machine Scale Set resource. resource\_id Description: The ID of the Virtual Machine Scale Set. resource\_name Description: The name of the Virtual Machine Scale Set. |
<!-- END_TF_DOCS -->